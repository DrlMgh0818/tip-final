---

import Layout from '~/layouts/PageLayout.astro';
import OrgChartComponent from '~/components/widgets/OrgChartComponent.jsx';  // Make sure the path is correct
import Headline from "~/components/ui/Headline.astro";
import WidgetWrapper from '~/components/ui/WidgetWrapper.astro';
import React from 'react';  // React must be in scope because JSX is used
import OrgChart from '~/utils/moduleBridge.mjs';

// Prepare props and metadata from Astro
const {
  title = 'Industrial Engineering Department Faculty',
  subtitle = 'Where expertise meets innovation',
  tagline = 'Faculty Members',
  id,
  isDark = false,
  classes = {},
  bg = await Astro.slots.render('bg'),
} = Astro.props;

const metadata = {
  title: 'Faculty Members',
};


// Import and process faculty data
const facultyDataFiles = import.meta.glob('../content/faculty/*.json', { eager: true });
const facultyData = Object.values(facultyDataFiles).map(file => file.default);



---

<script is:inline src="https://d3js.org/d3.v7.min.js"></script>
<script is:inline src="https://cdn.jsdelivr.net/npm/d3-org-chart@3.1.0"></script>
<script is:inline src="https://cdn.jsdelivr.net/npm/d3-flextree@2.1.2/build/d3-flextree.js"></script>
<Layout metadata={metadata}>
  <WidgetWrapper id={id} isDark={isDark} containerClass={`max-w-6xl mx-auto ${classes.container ?? ''}`} bg={bg}>
    <Headline title={title} subtitle={subtitle} tagline={tagline} />


      <OrgChartComponent client:load facultyData={facultyData} />  
  </WidgetWrapper>
</Layout>
